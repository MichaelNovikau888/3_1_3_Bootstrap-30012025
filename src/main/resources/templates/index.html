<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Error</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" defer></script>
</head>
<body>
<div class="container mt-5">
    <div class="alert alert-danger" role="alert">
        <h1 class="alert-heading">Произошла ошибка</h1>
        <hr>
        <p><strong>Код ошибки:</strong> <span id="error-status">Загрузка...</span></p>
        <p><strong>Сообщение:</strong> <span id="error-message">Загрузка...</span></p>
        <p><strong>Путь:</strong> <span id="error-path">Загрузка...</span></p>
        <p><strong>Дата и время:</strong> <span id="error-timestamp">Загрузка...</span></p>
        <div id="error-details" class="mt-3" style="display: none;">
            <h5>Дополнительные детали:</h5>
            <pre class="bg-light p-3 rounded" id="error-stack">Загрузка...</pre>
        </div>
        <button class="btn btn-secondary mt-3" id="toggle-details">Показать детали</button>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Пример данных об ошибке (можно заменить на реальные данные из сервера)
        const errorData = {
            status: 500,
            message: "Внутренняя ошибка сервера",
            path: "/admin/editUser",
            timestamp: new Date().toLocaleString(),
            stack: "java.lang.NullPointerException: Cannot read property 'name' of undefined\n    at UserController.getUser (UserController.java:45)\n    at java.base/java.util.Optional.orElseThrow(Optional.java:408)"
        };

        // Отображение данных об ошибке
        document.getElementById('error-status').textContent = errorData.status;
        document.getElementById('error-message').textContent = errorData.message;
        document.getElementById('error-path').textContent = errorData.path;
        document.getElementById('error-timestamp').textContent = errorData.timestamp;
        document.getElementById('error-stack').textContent = errorData.stack;

        // Логика для отображения/скрытия деталей
        const toggleButton = document.getElementById('toggle-details');
        const detailsSection = document.getElementById('error-details');
        toggleButton.addEventListener('click', () => {
            const isVisible = detailsSection.style.display === 'block';
            detailsSection.style.display = isVisible ? 'none' : 'block';
            toggleButton.textContent = isVisible ? 'Показать детали' : 'Скрыть детали';
        });
    });
</script>
</body>
</html>
